<html>
    <header>
        <title>Friend Finder, I reckon</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    </header>

    <body>
        <h1>Survey</h1>
        <h2><a href="home">Home</a></h2>

    <section id="survey">
        <form action="/api/newFriend" method="post">
            <div class="form-group">
                <label>Name</label>
                <input type="text" class="form-control" name="name" id="name" placeholder="name">
                <label>Photo</label>
                <input type="text" class="form-control" name="photo" id="photo" placeholder="link to photo">
            </div>
            <div class="scores">
                <div class="form-group">
                    <label>Mal and Zoe were once lovers?</label>
                    <select class="form-control" name="q1" id="q1">
                    <option value=1>1. No Way! Mal never "Bothered Her."</option>
                    <option value=2>2.</option>
                    <option value=3>3.</option>
                    <option value=4>4.</option>
                    <option value=5>5. Totally. "Grizwalds" are a turn-on!</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Jayne deserves a statue in Canton.</label>
                    <select class="form-control" name="q2" id="q2">
                    <option value="1">1. If they knew the truth, they'd melt down that mud!</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. The HERO deserved it! (...and eggs)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Mal "would've done the same in his position."</label>
                    <select class="form-control" name="q3" id="q3">
                    <option value="1">1. Of course. Catalyzers are worth killing for.</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. You already saw he didn't.</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Inara left the chest on the Serenity on purpose to poke at Mal.</label>
                    <select class="form-control" name="q4" id="q4">
                    <option value="1">1. Everyone can be forgetful. Sometimes a trunk is just a trunk.</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. Of course. All her best smelling stuff was in there. #wiles</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Do you think Wash named the T-rex?</label>
                    <select class="form-control" name="q5" id="q5">
                    <option value="1">1. No. His was an evil laugh and was undeserving of a name.</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. Of course. His name was "Leaf" (and the Stego was "Wind"... get it?)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>The operative's big brother was Book.</label>
                    <select class="form-control" name="q6" id="q6">
                    <option value="1">1. Gorrammit. No. That makes no sense.</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. Gorrammit... that makes TOTAL Joss-like sense.</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Niska will come back for more some day.</label>
                    <select class="form-control" name="q7" id="q7">
                    <option value="1">1. No way. Mal's rep is too solid for that.</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. Of course. Niska's rep is far from gossip.</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Ice planets are delicious.</label>
                    <select class="form-control" name="q8" id="q8">
                    <option value="1">1. Meh. Too problematic</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. They are so shiny</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>River was made to kill The Reavers</label>
                    <select class="form-control" name="q9" id="q9">
                    <option value="1">1. No way. She's a rocking dancer/blade-mistress, but that was just about the opportunity to save everyone.</option>
                    <option value="2">2.</option>
                    <option value="3">3.</option>
                    <option value="4">4.</option>
                    <option value="5">5. Maybe the parliment isn't so bad afterall and they made her to clean up their mess?</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for=>Kaywinnet Lee Frye will become Kaywinnet Lee Frye Tamm</label>
                    <select class="form-control" name="q10" id="q10">
                    <option value=1>1. No way. Some things would be broke and can't be fixed.</option>
                    <option value=2>2.</option>
                    <option value=3>3.</option>
                    <option value=4>4.</option>
                    <option value=5>5. Way. No power in the verse can stop them!</option>
                    </select>
                </div>
            </div>

            <button type="submit" class="btn btn-primary" 
            id="newFriendSubmission">Submit</button>
        </form>
    </section>

    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


        <script type="text/javascript">

            $.ajaxSettings.traditional = true;
            // submit entries to the API for new Friends
            
            function queryFriends() {
                var currentURL = window.location.origin;
                var allFriends;
                $.ajax({ url: currentURL + "/api/friends", method: "GET" })
                    .then(function(friends) {
                    console.log(friends);
                    var previousFriends = friends.length-1;
                    console.log("current friend count " + previousFriends);
                    for (var i = 0; i < friends.length-1; i++) {
                        console.log(friends[i].scores);
                        for (var j = 0; j < friends[i].scores.length; j++) {
                            console.log(friends[i].scores[j]);
                        }
                    }
                })
            }

            $("#newFriendSubmission").on("click", function(event) {
              event.preventDefault();
              var newFriend = {
                name: $("#name").val().trim(),
                photo: $("#photo").val().trim(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val()
                ]
              };
              console.log(newFriend);
        
              $.post("/api/newFriend", newFriend)
              .then(function(data) {
                // console.log(newFriend);
                console.log(data.scores)
                // console.log(data);
                alert("Adding friend...");
                queryFriends();
              });
            });


          </script>
    </body>
</html>